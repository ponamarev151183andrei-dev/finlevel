<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinLevel ‚Äî –ë—é–¥–∂–µ—Ç 50-30-20</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            text-align: center;
        }
        h1 {
            color: #6c5ce7;
        }
        .card {
            background: #16213e;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
        }
        .balance {
            font-size: 32px;
            font-weight: bold;
            color: #f1c40f;
        }
        .row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        .category {
            flex: 1;
            margin: 0 5px;
            padding: 10px;
            border-radius: 10px;
        }
        .needs { background: #e74c3c; }
        .wants { background: #f39c12; }
        .savings { background: #2ecc71; }
        .button {
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 16px;
            padding: 16px;
            font-size: 18px;
            width: 100%;
            cursor: pointer;
            margin: 10px 0;
        }
        .small-btn {
            background: #3498db;
            padding: 8px;
            font-size: 14px;
            margin: 5px;
            width: auto;
        }
    </style>
</head>
<body>
    <h1>üí∞ FinLevel</h1>
    
    <div class="card">
        <h2>üí∞ –û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç</h2>
        <div class="balance" id="balance">0</div>
    </div>

    <div class="card">
        <h2>üìä –ë—é–¥–∂–µ—Ç 50-30-20</h2>
        <div class="row">
            <div class="category needs">
                <div>ü•ñ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ</div>
                <div class="balance" id="needs">0</div>
            </div>
            <div class="category wants">
                <div>üéÆ –•–æ—Ç–µ–ª–∫–∏</div>
                <div class="balance" id="wants">0</div>
            </div>
            <div class="category savings">
                <div>üí∞ –°–±–µ—Ä–µ–∂–µ–Ω–∏—è</div>
                <div class="balance" id="savings">0</div>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>‚ûï –ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å</h2>
        <button class="button" onclick="addCoin()">üëÜ +1 –º–æ–Ω–µ—Ç–∞</button>
    </div>

    <div class="card">
        <h2>üí∏ –ü–æ—Ç—Ä–∞—Ç–∏—Ç—å</h2>
        <button class="button small-btn" onclick="spend('needs', 10)">ü•ñ –ù—É–∂–Ω–æ–µ (10)</button>
        <button class="button small-btn" onclick="spend('wants', 10)">üéÆ –•–æ—Ç–µ–ª–∫–∏ (10)</button>
        <button class="button small-btn" onclick="spend('savings', 10)">üí∞ –°–±–µ—Ä–µ–∂–µ–Ω–∏—è (10)</button>
    </div>

    <div class="card">
        <h2>üìà –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–æ—Ö–æ–¥</h2>
        <button class="button" onclick="distributeIncome()">üîÑ –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å 100 –º–æ–Ω–µ—Ç –ø–æ 50-30-20</button>
    </div>
    
    <button class="button" onclick="window.Telegram.WebApp.close()">
        –ó–∞–∫—Ä—ã—Ç—å
    </button>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        let coins = localStorage.getItem('finlevel_coins');
        let needs = localStorage.getItem('finlevel_needs');
        let wants = localStorage.getItem('finlevel_wants');
        let savings = localStorage.getItem('finlevel_savings');
        
        coins = coins ? parseInt(coins) : 0;
        needs = needs ? parseInt(needs) : 0;
        wants = wants ? parseInt(wants) : 0;
        savings = savings ? parseInt(savings) : 0;
        
        const balanceEl = document.getElementById('balance');
        const needsEl = document.getElementById('needs');
        const wantsEl = document.getElementById('wants');
        const savingsEl = document.getElementById('savings');
        
        function updateDisplay() {
            balanceEl.textContent = coins;
            needsEl.textContent = needs;
            wantsEl.textContent = wants;
            savingsEl.textContent = savings;
        }
        updateDisplay();
        
        function saveAll() {
            localStorage.setItem('finlevel_coins', coins);
            localStorage.setItem('finlevel_needs', needs);
            localStorage.setItem('finlevel_wants', wants);
            localStorage.setItem('finlevel_savings', savings);
        }
        
        function addCoin() {
            coins++;
            saveAll();
            updateDisplay();
            if (window.Telegram.WebApp.HapticFeedback) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
            }
        }
        
        function spend(category, amount) {
            if (coins < amount) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç');
                return;
            }
            coins -= amount;
            if (category === 'needs') needs += amount;
            if (category === 'wants') wants += amount;
            if (category === 'savings') savings += amount;
            saveAll();
            updateDisplay();
            if (window.Telegram.WebApp.HapticFeedback) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
        }
        
        function distributeIncome() {
            if (coins < 100) {
                alert('–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 100 –º–æ–Ω–µ—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è');
                return;
            }
            
            let income = 100;
            coins -= income;
            
            needs += Math.floor(income * 0.5);  // 50%
            wants += Math.floor(income * 0.3);  // 30%
            savings += Math.floor(income * 0.2); // 20%
            
            saveAll();
            updateDisplay();
            
            if (window.Telegram.WebApp.HapticFeedback) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('heavy');
            }
        }
        
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
    </script>
</body>
</html>
